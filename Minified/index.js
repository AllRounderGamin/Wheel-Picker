function init(){let a=JSON.parse(localStorage.getItem("wheels"));if(a&&a.length>0)for(let b of a)makeCustomWheel(b);else makeDefaultWheel();localStorage.getItem("next-id")||localStorage.setItem("next-id","1"),document.querySelector("#addWheelButton").addEventListener("click",makeNewWheel)}function makeDefaultWheel(){let a=document.createElement("wheel-picker"),b=[];a.setAttribute("id","0"),a.setAttribute("items",'["Placeholder", "Lorem Ipsum", "Test"]'),a.setAttribute("colors",'["red", "blue", "green"]'),a.setAttribute("customising","false"),b.push({id:"0",items:'["Placeholder", "Lorem Ipsum", "Test"]',colors:'["red", "blue", "green"]'}),localStorage.setItem("wheels",JSON.stringify(b)),document.querySelector("#wheelArea").appendChild(a)}function makeNewWheel(){let a=document.createElement("wheel-picker"),c=JSON.parse(localStorage.getItem("wheels")),b=localStorage.getItem("next-id");a.setAttribute("id",b),a.setAttribute("items",'["Click Settings", "To Customise"]'),a.setAttribute("colors",'["red", "blue"]'),a.setAttribute("customising","false"),c.push({id:b,items:'["Click Settings", "To Customise"]',colors:'["red", "blue"]'}),localStorage.setItem("wheels",JSON.stringify(c)),localStorage.setItem("next-id",(parseInt(b)+1).toString());let d=a.shadowRoot.querySelector(".settingsButton");d.setAttribute("id",b),d.addEventListener("click",loadSettings),document.querySelector("#wheelArea").appendChild(a)}function makeCustomWheel(b){let a=document.createElement("wheel-picker");a.setAttribute("id",b.id),a.setAttribute("items",b.items),a.setAttribute("colors",b.colors),a.setAttribute("customising","false");let c=a.shadowRoot.querySelector(".settingsButton");c.setAttribute("id",b.id),c.addEventListener("click",loadSettings),document.querySelector("#wheelArea").appendChild(a)}function loadSettings(h){let e=document.querySelector("#settingsArea");clearArea(e);let a,f=h.target.id,i=document.querySelectorAll("wheel-picker");for(let g of i)g.id===f&&(a=g);a.setAttribute("customising","true");let j=a.items,k=a.colors;for(let d=0;d<a.items.length;d++){let b=document.createElement("div");b.setAttribute("class","setting"),b.appendChild(document.querySelector("#option").content.cloneNode(!0)),b.querySelector(".item").value=j[d],b.querySelector(".color").value=k[d],e.appendChild(b)}let c=document.createElement("button");c.setAttribute("id",f),c.textContent="Save Settings",c.setAttribute("type","button"),c.addEventListener("click",saveSettings),e.appendChild(c)}function saveSettings(i){let j=i.target.id,b,k=document.querySelectorAll("wheel-picker");for(let g of k)g.id===j&&(b=g);let l=document.querySelectorAll(".item"),m=document.querySelectorAll(".color"),d=[],e=[];for(let n of l)d.push(n.value);for(let o of m)e.push(o.value);b.setAttribute("items",JSON.stringify(d)),b.setAttribute("colors",JSON.stringify(e)),b.setAttribute("customising","false");let a=JSON.parse(localStorage.getItem("wheels")),f,c;for(let h of a)h.id===this.getAttribute("id")&&(f=a.indexOf(h),c=a[f]);c.items=JSON.stringify(d),c.colors=JSON.stringify(e),a[f]=c,localStorage.setItem("wheels",JSON.stringify(a))}function clearArea(a){for(;a.hasChildNodes();)a.removeChild(a.firstChild)}window.addEventListener("load",init)
