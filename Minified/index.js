function init(){let a=JSON.parse(localStorage.getItem("wheels"));if(a&&a.length>0)for(let b of a)makeCustomWheel(b);else makeDefaultWheel();localStorage.getItem("next-id")||localStorage.setItem("next-id","1"),document.querySelector("#addWheelButton").addEventListener("click",makeNewWheel)}function makeDefaultWheel(){let a=document.createElement("wheel-picker"),b=[],c={id:"0",items:'["Placeholder", "Lorem Ipsum", "Test"]',colors:'["red", "blue", "green"]'};setUpAttributes(a,c),b.push(c),localStorage.setItem("wheels",JSON.stringify(b)),document.querySelector("#wheelArea").appendChild(a)}function makeNewWheel(){let a=document.createElement("wheel-picker"),b=JSON.parse(localStorage.getItem("wheels")),c=localStorage.getItem("next-id"),d={id:c,items:'["Click Settings", "To Customise"]',colors:'["red", "blue"]'};setUpAttributes(a,d),b.push(d),localStorage.setItem("wheels",JSON.stringify(b)),localStorage.setItem("next-id",(parseInt(c)+1).toString()),document.querySelector("#wheelArea").appendChild(a)}function makeCustomWheel(b){let a=document.createElement("wheel-picker");setUpAttributes(a,b),document.querySelector("#wheelArea").appendChild(a)}function loadSettings(g){let d=document.querySelector("#settingsArea");clearArea(d);let b,e=g.target.getAttribute("wheelid"),h=document.querySelectorAll("wheel-picker");for(let f of h)f.id===e&&(b=f);b.setAttribute("customising","true");let i=JSON.parse(b.getAttribute("items")),j=JSON.parse(b.getAttribute("colors"));for(let c=0;c<i.length;c++){let a=document.createElement("div");a.setAttribute("class","setting"),a.appendChild(document.querySelector("#option").content.cloneNode(!0)),a.querySelector(".item").value=i[c],a.querySelector(".color").value=j[c],setUpButton(c.toString(),"optid","Remove Option",removeOption,a),d.appendChild(a)}setUpButton("addOpt","id","Add Option",addOption,d),setUpButton(e,"wheelid","Save Settings",saveSettings,d)}function saveSettings(j){let g=j.target.getAttribute("wheelid"),b,k=document.querySelectorAll("wheel-picker");for(let h of k)h.id===g&&(b=h);let l=document.querySelectorAll(".item"),m=document.querySelectorAll(".color"),d=[],e=[];for(let n of l)d.push(n.value);for(let o of m)e.push(o.value);b.setAttribute("items",JSON.stringify(d)),b.setAttribute("colors",JSON.stringify(e)),b.setAttribute("customising","false");let a=JSON.parse(localStorage.getItem("wheels")),f,c;for(let i of a)i.id===g&&(f=a.indexOf(i),c=a[f]);c.items=JSON.stringify(d),c.colors=JSON.stringify(e),a[f]=c,localStorage.setItem("wheels",JSON.stringify(a))}function setUpAttributes(a,b){a.setAttribute("id",b.id),a.setAttribute("items",b.items),a.setAttribute("colors",b.colors),a.setAttribute("customising","false");let c=a.shadowRoot.querySelector(".settingsButton");c.setAttribute("wheelid",b.id),c.addEventListener("click",loadSettings)}function setUpButton(b,c,d,e,f){let a=document.createElement("button");a.setAttribute(c,b),a.textContent=d,a.setAttribute("type","button"),a.addEventListener("click",e),f.appendChild(a)}function addOption(){let a=document.createElement("div");a.setAttribute("class","setting"),a.appendChild(document.querySelector("#option").content.cloneNode(!0));let b=document.querySelector("#addOpt");setUpButton(b.parentNode.querySelectorAll(".setting").length,"optid","Remove Option",removeOption,a),b.parentNode.insertBefore(a,b)}function removeOption(a){let b=document.querySelectorAll(".setting"),c=b[a.target.getAttribute("optid")];c.remove()}function clearArea(a){for(;a.hasChildNodes();)a.removeChild(a.firstChild)}window.addEventListener("load",init)
